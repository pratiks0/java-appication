<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Students - Student Management System</title>
    <style>
		* {
		           margin: 0;
		           padding: 0;
		           box-sizing: border-box;
		       }

		       body {
		           font-family: -apple-system, BlinkMacSystemFont, 'Inter', 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
		           background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
		           min-height: 100vh;
		           padding: 40px 20px;
		           color: #e2e8f0;
		       }

		       .container {
		           max-width: 1400px;
		           margin: 0 auto;
		           background: rgba(30, 41, 59, 0.6);
		           backdrop-filter: blur(20px);
		           border: 1px solid rgba(148, 163, 184, 0.1);
		           padding: 48px;
		           border-radius: 24px;
		           box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
		       }

		       .header {
		           display: flex;
		           justify-content: space-between;
		           align-items: center;
		           margin-bottom: 40px;
		           flex-wrap: wrap;
		           gap: 20px;
		       }

		       h2 {
		           font-size: 32px;
		           font-weight: 600;
		           color: #f1f5f9;
		           letter-spacing: -0.02em;
		       }

		       .header-actions {
		           display: flex;
		           gap: 12px;
		           align-items: center;
		           flex-wrap: wrap;
		       }

		       .nav-links {
		           display: flex;
		           gap: 8px;
		           background: rgba(15, 23, 42, 0.4);
		           padding: 6px;
		           border-radius: 12px;
		           border: 1px solid rgba(148, 163, 184, 0.1);
		       }

		       .nav-link {
		           color: #cbd5e1;
		           padding: 10px 20px;
		           text-decoration: none;
		           border-radius: 8px;
		           font-size: 14px;
		           font-weight: 500;
		           transition: all 0.3s ease;
		       }

		       .nav-link:hover {
		           background: rgba(59, 130, 246, 0.1);
		           color: #93c5fd;
		       }

		       .nav-link[style*="background-color: #4CAF50"] {
		           background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%) !important;
		           color: white;
		       }

		       .add-button {
		           background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
		           color: white;
		           padding: 12px 24px;
		           text-decoration: none;
		           border-radius: 12px;
		           font-weight: 600;
		           font-size: 14px;
		           transition: all 0.3s ease;
		           box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
		       }

		       .add-button:hover {
		           transform: translateY(-2px);
		           box-shadow: 0 8px 20px rgba(59, 130, 246, 0.4);
		       }

		       .message {
		           padding: 16px 20px;
		           border-radius: 12px;
		           margin-bottom: 24px;
		           font-size: 14px;
		           border: 1px solid;
		       }

		       .success {
		           background: rgba(16, 185, 129, 0.1);
		           color: #6ee7b7;
		           border-color: rgba(16, 185, 129, 0.3);
		       }

		       .error {
		           background: rgba(239, 68, 68, 0.1);
		           color: #fca5a5;
		           border-color: rgba(239, 68, 68, 0.3);
		       }

		       table {
		           width: 100%;
		           border-collapse: separate;
		           border-spacing: 0;
		           margin-top: 24px;
		       }

		       th {
		           background: rgba(15, 23, 42, 0.5);
		           color: #cbd5e1;
		           padding: 16px 20px;
		           text-align: left;
		           font-weight: 600;
		           font-size: 13px;
		           text-transform: uppercase;
		           letter-spacing: 0.05em;
		           border-bottom: 1px solid rgba(148, 163, 184, 0.1);
		       }

		       th:first-child {
		           border-top-left-radius: 12px;
		       }

		       th:last-child {
		           border-top-right-radius: 12px;
		       }

		       td {
		           padding: 20px;
		           border-bottom: 1px solid rgba(148, 163, 184, 0.1);
		           color: #e2e8f0;
		           font-size: 14px;
		       }

		       tr {
		           transition: background-color 0.2s ease;
		       }

		       tr:hover {
		           background: rgba(59, 130, 246, 0.05);
		       }

		       tr:last-child td:first-child {
		           border-bottom-left-radius: 12px;
		       }

		       tr:last-child td:last-child {
		           border-bottom-right-radius: 12px;
		       }

		       .action-links {
		           display: flex;
		           gap: 16px;
		       }

		       .action-links a {
		           text-decoration: none;
		           color: #60a5fa;
		           font-weight: 500;
		           font-size: 14px;
		           transition: all 0.2s ease;
		       }

		       .action-links a:hover {
		           color: #93c5fd;
		       }

		       .action-links a.delete {
		           color: #f87171;
		       }

		       .action-links a.delete:hover {
		           color: #fca5a5;
		       }

		       .badge {
		           background: rgba(59, 130, 246, 0.15);
		           color: #93c5fd;
		           padding: 6px 10px;
		           border-radius: 6px;
		           font-size: 12px;
		           font-weight: 500;
		           display: inline-block;
		           margin-right: 6px;
		           margin-bottom: 4px;
		       }

		       .no-data {
		           text-align: center;
		           padding: 80px 40px;
		           color: #94a3b8;
		       }

		       .no-data p {
		           font-size: 16px;
		           line-height: 1.6;
		           margin-bottom: 12px;
		       }

		       .no-data a {
		           color: #60a5fa;
		           text-decoration: none;
		           transition: color 0.2s ease;
		       }

		       .no-data a:hover {
		           color: #93c5fd;
		       }

		       @media (max-width: 768px) {
		           .container {
		               padding: 32px 24px;
		           }

		           h2 {
		               font-size: 24px;
		           }

		           .header {
		               flex-direction: column;
		               align-items: flex-start;
		           }

		           .nav-links {
		               width: 100%;
		               flex-direction: column;
		           }

		           .nav-link {
		               width: 100%;
		               text-align: center;
		           }

		           table {
		               font-size: 13px;
		           }

		           th, td {
		               padding: 12px;
		           }
		       }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <div class="navbar">
        <h1>üë®‚Äçüéì Student Management System</h1>
        
        <div class="nav-links">
            <a href="/students">üë• Students</a>
            <a href="/departments">üè¢ Departments</a>
            <a href="/courses">üìö Courses</a>
        </div>

        <div class="navbar-user" id="navbar-user">
            <!-- User info will be injected by auth.js -->
        </div>
    </div>

    <!-- Main Container -->
    <div class="container">
        <div class="header">
            <h2>Students List</h2>
            <a href="/students/form" class="btn btn-primary">+ Add New Student</a>
        </div>

        <!-- Success/Error Messages -->
        <div th:if="${successMessage}" class="alert alert-success" th:text="${successMessage}"></div>
        <div th:if="${errorMessage}" class="alert alert-error" th:text="${errorMessage}"></div>

        <!-- Students Table -->
        <div th:if="${students != null and !students.isEmpty()}">
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Department</th>
                        <th>Courses</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="student : ${students}">
                        <td th:text="${student.id}">1</td>
                        <td th:text="${student.name}">John Doe</td>
                        <td th:text="${student.email}">john@example.com</td>
                        <td th:text="${student.department != null ? student.department.name : 'N/A'}">Computer Science</td>
                        <td>
                            <span th:if="${student.courses != null and !student.courses.isEmpty()}">
                                <span th:each="course, iterStat : ${student.courses}">
                                    <span th:text="${course.title}">Course</span>
                                    <span th:unless="${iterStat.last}">, </span>
                                </span>
                            </span>
                            <span th:unless="${student.courses != null and !student.courses.isEmpty()}">No courses</span>
                        </td>
                        <td>
                            <div class="actions">
                                <a th:href="@{/students/edit/{id}(id=${student.id})}" 
                                   class="btn btn-primary" style="font-size: 12px; padding: 6px 12px;">Edit</a>
                                <a th:href="@{/students/delete/{id}(id=${student.id})}" 
                                   class="btn btn-danger" style="font-size: 12px; padding: 6px 12px;"
                                   onclick="return confirm('Are you sure you want to delete this student?');">Delete</a>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Empty State -->
        <div th:if="${students == null or students.isEmpty()}" class="empty-state">
            <h3>No students found</h3>
            <p>Click "Add New Student" to get started!</p>
            <p style="margin-top: 15px;">
                üí° <strong>Tip:</strong> You may want to create 
                <a href="/departments" style="color: #4CAF50;">departments</a> and 
                <a href="/courses" style="color: #4CAF50;">courses</a> first!
            </p>
        </div>
    </div>

    <!-- Include Authentication Script -->
    <script th:src="@{/js/auth.js}"></script>
</body>
</html>